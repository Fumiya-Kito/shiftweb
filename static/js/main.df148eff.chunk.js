(this.webpackJsonpfrontend=this.webpackJsonpfrontend||[]).push([[0],{100:function(e,t,n){},129:function(e,t,n){"use strict";n.r(t);var c=n(1),r=n.n(c),a=n(31),s=n.n(a),i=(n(99),n(100),n.p,n(146)),l=n(139),o=n(147),j=n(143),d=n(44),b=n(10),u=n(17),h="USER_LOGIN_REQUEST",O="USER_LOGIN_SUCCESS",x="USER_LOGIN_FAIL",p="USER_LOGOUT",m="USER_PROFILE_REQUEST",f="USER_PROFILE_SUCCESS",v="USER_PROFILE_RESET",g={userInfo:localStorage.getItem("userInfo")?JSON.parse(localStorage.getItem("userInfo")):null,error:!1,loading:!0},y={profile:localStorage.getItem("profile")?JSON.parse(localStorage.getItem("profile")):{},error:!1,loading:!0},S=n(69),_="SHIFT_REQUEST",C="SHIFT_SUCCESS",I="SHIFT_ADD_ITEM",N="SHIFT_REMOVE_ITEM",w="SHIFT_CHANGE_STATUS",k="SHIFT_RESET",L=n(50),E=n(42),D=n(34),F=n(51),M=n(52),G={shiftItems:[],isSubmitted:!1,loading:!1,period:[Object(L.a)(Object(E.a)(Object(D.a)(new Date,1))),Object(L.a)(Object(F.a)(Object(D.a)(new Date,1)))],deadline:Object(M.a)(Object(L.a)(Object(F.a)(new Date)),10)},T=n(2),H=function(e,t){var n=r.a.createContext(),a=r.a.createContext();return[function(r){var s=r.children,i=Object(c.useReducer)(e,t),l=Object(b.a)(i,2),o=l[0],j=l[1];return Object(T.jsx)(a.Provider,{value:j,children:Object(T.jsx)(n.Provider,{value:o,children:s})})},function(){return r.a.useContext(n)},function(){return r.a.useContext(a)}]},B=H((function(e,t){switch(t.type){case h:return{loading:!0};case O:return{loading:!1,userInfo:t.payload};case x:return{loading:!1,error:!0};case p:return{userInfo:null};default:return e}}),g),R=Object(b.a)(B,3),A=R[0],U=R[1],q=R[2],P=H((function(e,t){switch(t.type){case m:return Object(u.a)(Object(u.a)({},e),{},{loading:!0});case f:return Object(u.a)(Object(u.a)({},e),{},{loading:!1,profile:t.payload});case"USER_PROFILE_FAIL":return Object(u.a)(Object(u.a)({},e),{},{loading:!1,error:!0});case v:return y;default:return e}}),y),z=Object(b.a)(P,3),J=z[0],Y=z[1],W=z[2],Q=H((function(e,t){switch(t.type){case _:return Object(u.a)(Object(u.a)({},e),{},{loading:!0});case C:return Object(u.a)(Object(u.a)({},e),{},{loading:!1});case I:var n=t.payload,c=e.shiftItems.find((function(e){return e.date===n.date}));return c?Object(u.a)(Object(u.a)({},e),{},{loading:!1,shiftItems:e.shiftItems.map((function(e){return e.date===c.date?n:e}))}):Object(u.a)(Object(u.a)({},e),{},{loading:!1,shiftItems:[].concat(Object(S.a)(e.shiftItems),[n])});case N:return Object(u.a)(Object(u.a)({},e),{},{loading:!1,shiftItems:e.shiftItems.filter((function(e){return e.date!==t.payload}))});case w:return Object(u.a)(Object(u.a)({},e),{},{loading:!1,isSubmitted:!0});case k:return G;default:return e}}),G),V=Object(b.a)(Q,3),K=V[0],X=V[1],Z=V[2],$=n(12),ee=n.n($),te=n(21),ne=n(20),ce=n.n(ne),re=function(){var e=Object(te.a)(ee.a.mark((function e(t,n,c){var r,a,s;return ee.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,c({type:h}),r={headers:{"Content-type":"application/json"}},e.next=5,ce.a.post("/api/users/login/",{username:t,password:n},r);case 5:a=e.sent,s=a.data,c({type:O,payload:s}),localStorage.setItem("userInfo",JSON.stringify(s)),e.next=14;break;case 11:e.prev=11,e.t0=e.catch(0),c({type:x,payload:e.t0.response&&e.t0.response.data.detail?e.t0.response.data.detail:e.t0.message});case 14:case"end":return e.stop()}}),e,null,[[0,11]])})));return function(t,n,c){return e.apply(this,arguments)}}(),ae=function(){var e=Object(te.a)(ee.a.mark((function e(t,n){var c,r,a;return ee.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t({type:m}),c={headers:{"Content-type":"application/json",Authorization:"Bearer ".concat(n.token)}},e.next=4,ce.a.get("/api/users/profile/",c);case 4:r=e.sent,a=r.data,t({type:f,payload:a}),localStorage.setItem("profile",JSON.stringify(a));case 8:case"end":return e.stop()}}),e)})));return function(t,n){return e.apply(this,arguments)}}();var se=function(){var e=U(),t=q(),n=e.userInfo,c=Z(),r=Y().profile,a=W();return Object(T.jsx)("header",{children:Object(T.jsx)(i.a,{bg:"dark",variant:"dark",collapseOnSelect:!0,children:Object(T.jsxs)(l.a,{children:[Object(T.jsx)(i.a.Brand,{children:"Shift Web"}),Object(T.jsx)(o.a,{className:"mr-auto p-1",children:n?Object(T.jsxs)(j.a,{title:r.name,id:"username",className:"px-4",children:[Object(T.jsx)(d.LinkContainer,{to:"/profile",children:Object(T.jsx)(j.a.Item,{children:"\u30db\u30fc\u30e0"})}),Object(T.jsx)(j.a.Item,{onClick:function(){!function(e,t){localStorage.removeItem("userInfo"),localStorage.removeItem("profile"),e({type:p})}(t),c({type:k}),a({type:v})},children:"\u30ed\u30b0\u30a2\u30a6\u30c8"})]}):Object(T.jsx)(d.LinkContainer,{to:"/login",children:Object(T.jsxs)(o.a.Link,{children:[Object(T.jsx)("i",{className:"fas fa-user"}),"\u30ed\u30b0\u30a4\u30f3"]})})})]})})})},ie=n(24),le=n(15);var oe=function(e){var t=e.history;return U().userInfo,Object(c.useEffect)((function(){t.push("/login")}),[]),Object(T.jsx)(T.Fragment,{children:Object(T.jsx)("h1",{children:"Home Page"})})},je=n(145),de=n(93),be=n(140),ue=n(94);var he=function(e){var t=e.children;return Object(T.jsx)(l.a,{children:Object(T.jsx)(be.a,{className:"justify-content-md-center",children:Object(T.jsx)(ue.a,{xs:12,md:6,children:t})})})},Oe=n(148);var xe=function(e){var t=e.variant,n=e.children;return Object(T.jsx)(Oe.a,{variant:t,children:n})};var pe=function(e){var t=e.history,n=Object(c.useState)(""),r=Object(b.a)(n,2),a=r[0],s=r[1],i=Object(c.useState)(""),l=Object(b.a)(i,2),o=l[0],j=l[1],d=Object(c.useState)(""),u=Object(b.a)(d,2),h=u[0],O=u[1],x=Object(c.useState)(""),p=Object(b.a)(x,2),m=p[0],f=p[1],v=Object(c.useState)(""),g=Object(b.a)(v,2),y=g[0],S=g[1],_=U(),C=q(),I=_.userInfo;Object(c.useEffect)((function(){I&&t.push("/")}),[t,I]);var N=function(){var e=Object(te.a)(ee.a.mark((function e(t){return ee.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t.preventDefault(),h===m){e.next=5;break}S("Password do not match"),e.next=8;break;case 5:return e.next=7,ce.a.post("/api/users/register/",{name:a,email:o,password:h});case 7:re(o,h,C);case 8:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}();return Object(T.jsxs)(he,{children:[Object(T.jsx)("h1",{children:"\u30a2\u30ab\u30a6\u30f3\u30c8\u767b\u9332"}),y&&Object(T.jsx)(xe,{variant:"danger",children:y}),Object(T.jsxs)(je.a,{onSubmit:N,children:[Object(T.jsxs)(je.a.Group,{controlId:"name",className:"mb-4",children:[Object(T.jsx)(je.a.Label,{children:"\u540d\u524d"}),Object(T.jsx)(je.a.Control,{required:!0,type:"name",placeholder:"\u540d\u524d\u3092\u5165\u529b",value:a,onChange:function(e){return s(e.target.value)}})]}),Object(T.jsxs)(je.a.Group,{controlId:"email",className:"mb-4",children:[Object(T.jsx)(je.a.Label,{children:"\u30e1\u30fc\u30eb\u30a2\u30c9\u30ec\u30b9"}),Object(T.jsx)(je.a.Control,{required:!0,type:"email",placeholder:"\u30e1\u30fc\u30eb\u30a2\u30c9\u30ec\u30b9\u3092\u5165\u529b",value:o,onChange:function(e){return j(e.target.value)}})]}),Object(T.jsxs)(je.a.Group,{controlId:"password",className:"mb-4",children:[Object(T.jsx)(je.a.Label,{children:"\u30d1\u30b9\u30ef\u30fc\u30c9"}),Object(T.jsx)(je.a.Control,{required:!0,type:"password",placeholder:"\u30d1\u30b9\u30ef\u30fc\u30c9\u3092\u5165\u529b",value:h,onChange:function(e){return O(e.target.value)}})]}),Object(T.jsxs)(je.a.Group,{controlId:"passwordConfirm",className:"mb-4",children:[Object(T.jsx)(je.a.Label,{children:"\u30d1\u30b9\u30ef\u30fc\u30c9\u78ba\u8a8d"}),Object(T.jsx)(je.a.Control,{required:!0,type:"password",placeholder:"\u30d1\u30b9\u30ef\u30fc\u30c9\u3092\u3082\u3046\u4e00\u5ea6\u5165\u529b",value:m,onChange:function(e){return f(e.target.value)}})]}),Object(T.jsx)(de.a,{type:"submit",variant:"primary",children:"\u767b\u9332"})]})]})},me=n(141);var fe=function(){return Object(T.jsx)(me.a,{animation:"border",role:"status",style:{height:"50px",width:"50px",margin:"auto",display:"block"}})};var ve=function(e){var t=e.history,n=e.location,r=U(),a=q(),s=r.userInfo,i=r.error,l=Object(c.useState)(""),o=Object(b.a)(l,2),j=o[0],d=o[1],u=Object(c.useState)(""),h=Object(b.a)(u,2),O=h[0],x=h[1],p=n.search?n.search.split("=")[1]:"/";return Object(c.useEffect)((function(){s&&t.push("/profile")}),[t,s]),Object(T.jsxs)(he,{children:[Object(T.jsx)("h1",{children:"\u30ed\u30b0\u30a4\u30f3"}),i&&Object(T.jsx)(xe,{variant:"danger",children:"'\u30e1\u30fc\u30eb\u30a2\u30c9\u30ec\u30b9\u304b\u30d1\u30b9\u30ef\u30fc\u30c9\u304c\u9593\u9055\u3063\u3066\u3044\u307e\u3059'"}),Object(T.jsxs)(je.a,{onSubmit:function(e){e.preventDefault(),re(j,O,a)},children:[Object(T.jsxs)(je.a.Group,{controlId:"email",children:[Object(T.jsx)(je.a.Label,{className:"mb-0",children:"\u30e1\u30fc\u30eb\u30a2\u30c9\u30ec\u30b9"}),Object(T.jsx)(je.a.Control,{type:"email",placeholder:"e\u30e1\u30fc\u30eb\u30a2\u30c9\u30ec\u30b9\u3092\u5165\u529b",value:j,onChange:function(e){return d(e.target.value)}})]}),Object(T.jsxs)(je.a.Group,{controlId:"password",children:[Object(T.jsx)(je.a.Label,{className:"mb-0 mt-3",children:"\u30d1\u30b9\u30ef\u30fc\u30c9"}),Object(T.jsx)(je.a.Control,{type:"password",placeholder:"\u30d1\u30b9\u30ef\u30fc\u30c9\u3092\u5165\u529b",value:O,onChange:function(e){return x(e.target.value)}})]}),Object(T.jsx)(de.a,{type:"submit",variant:"primary",className:"mt-2 mb-3",children:"\u30ed\u30b0\u30a4\u30f3"})]}),Object(T.jsx)(be.a,{className:"py-3",children:Object(T.jsxs)(ue.a,{children:["\u30a2\u30ab\u30a6\u30f3\u30c8\u3092\u304a\u6301\u3061\u3067\u306a\u3044\u65b9\uff1a",Object(T.jsxs)(ie.Link,{to:p?"/register?redirect=".concat(p):"/register",children:[" "," \u767b\u9332"]})]})})]})},ge=n(142),ye=function(e,t,n,c,r,a){e({type:I,payload:{date:t,isWork:n,startTime:c,endTime:r,isAllDay:a}})},Se=function(e,t){e({type:N,payload:t})},_e=function(e){e({type:w})},Ce=n(60);var Ie=function(e){var t=e.history,n=Object(c.useState)([]),r=Object(b.a)(n,2),a=r[0],s=r[1],i=U().userInfo,o=W(),j=Y(),u=j.profile,h=j.loading,O=X(),x=O.period,p=O.deadline,m=O.isSubmitted,f=O.loading,v=Z(),g=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:new Date;return e.getFullYear()+"-"+("0"+(e.getMonth()+1)).slice(-2)+"-"+("0"+e.getDate()).slice(-2)};return Object(c.useEffect)((function(){if(i){var e=function(){var e=Object(te.a)(ee.a.mark((function e(){var t,c,r;return ee.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return v({type:_}),e.next=3,ce.a.get("/api/shifts/myshifts/",n);case 3:for(t=e.sent,c=t.data,s(c),r=0;r<c.length;r++)c[r].period_start===g(x[0])&&_e(v);v({type:C});case 8:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}();ae(o,i);var n={headers:{"Content-type":"application/json",Authorization:"Bearer ".concat(i.token)}};e()}else t.push("/login")}),[t,i]),Object(T.jsxs)("div",{children:[Object(T.jsxs)("h1",{children:["\u3088\u3046\u3053\u305d ",u.name," \u3055\u3093"]}),Object(T.jsxs)(be.a,{className:"py-3",children:[f?Object(T.jsx)(fe,{}):Object(T.jsxs)(ue.a,{md:5,sm:12,className:"py-2",children:[Object(T.jsx)("h4",{children:"\u30b7\u30d5\u30c8\u63d0\u51fa"}),Object(T.jsxs)(l.a,{className:"border",children:[Object(T.jsx)(d.LinkContainer,{to:"/shifts/submit",className:"d-grid gap-2 my-3 p-1",children:Object(T.jsxs)(de.a,{size:"lg",varinat:"primary",disabled:m||new Date>p,children:["\u4eca\u6708\u5206\u306f\u3053\u3061\u3089\u304b\u3089 ",Object(T.jsxs)("p",{className:"m-0",children:[g(x[0])," ~ ",g(x[1])]})]})}),Object(T.jsxs)("p",{className:"my-0 py-0",children:["\u63d0\u51fa\u72b6\u614b\uff1a ",m?Object(T.jsx)("i",{style:{color:"blue"},children:"\u63d0\u51fa\u6e08\u307f"}):Object(T.jsx)("i",{style:{color:"red"},children:"\u672a\u63d0\u51fa"})]}),Object(T.jsxs)("p",{className:"my-0 py-0",children:["\u63d0\u51fa\u671f\u9650\uff1a ",String(Object(Ce.a)(p,"yyyy-MM-dd' 'HH:mm"))," \u307e\u3067"]}),!m&&new Date>p&&Object(T.jsx)(xe,{variant:"danger",children:"\u671f\u9650\u5185\u306b\u63d0\u51fa\u3067\u304d\u3066\u3044\u307e\u305b\u3093 \u2192 \u62c5\u5f53\u30de\u30cd\u30fc\u30b8\u30e3\u30fc\u306b\u9023\u7d61\uff01"})]}),Object(T.jsx)("h4",{className:"mt-5",children:"\u30b7\u30d5\u30c8\u7ba1\u7406"}),0===a.length?Object(T.jsx)(xe,{variant:"info",children:"\u30b7\u30d5\u30c8\u304c\u3042\u308a\u307e\u305b\u3093"}):Object(T.jsxs)(ge.a,{striped:!0,hover:!0,responsive:!0,className:"table-sm border",children:[Object(T.jsx)("thead",{children:Object(T.jsxs)("tr",{children:[Object(T.jsx)("th",{children:"ID"}),Object(T.jsx)("th",{children:"PERIOD"}),Object(T.jsx)("th",{children:"STATUS"}),Object(T.jsx)("th",{})]})}),Object(T.jsx)("tbody",{children:a.map((function(e){return Object(T.jsxs)("tr",{children:[Object(T.jsx)("td",{children:e._id}),Object(T.jsxs)("td",{children:[e.period_start," "," "," ~ "," ",e.period_end]}),Object(T.jsx)("td",{children:e.is_confirmed?"\u78ba\u5b9a":"\u672a\u78ba\u5b9a"}),Object(T.jsx)("td",{children:e.is_confirmed?Object(T.jsx)(d.LinkContainer,{to:"/shifts/confirm/".concat(e._id),children:Object(T.jsx)(de.a,{className:"btn-sm",variant:"outline-primary",children:"\u8a73\u7d30"})}):Object(T.jsx)(d.LinkContainer,{to:"/shifts/update/".concat(e._id),children:Object(T.jsx)(de.a,{className:"btn-sm",variant:"outline-info",children:"\u66f4\u65b0"})})})]},e._id)}))})]})]}),h?Object(T.jsx)(fe,{}):Object(T.jsxs)(ue.a,{md:7,sm:12,className:"py-2",children:[Object(T.jsxs)(be.a,{children:[Object(T.jsx)(ue.a,{md:10,sm:10,xs:10,children:Object(T.jsx)("h4",{children:"\u30d7\u30ed\u30d5\u30a3\u30fc\u30eb"})}),Object(T.jsx)(ue.a,{md:2,sm:2,xs:2,className:"m-0 px-0 pb-2 text-center",children:Object(T.jsx)(d.LinkContainer,{to:"/update/profile",children:Object(T.jsx)(de.a,{variant:"outline-secondary",className:"btn-sm",children:"\u7de8\u96c6"})})})]}),Object(T.jsxs)(ge.a,{striped:!0,hover:!0,responsive:!0,size:"sm",className:"border",children:[Object(T.jsx)("thead",{children:Object(T.jsxs)("tr",{children:[Object(T.jsx)("th",{children:"Key"}),Object(T.jsx)("th",{children:"Value"}),Object(T.jsx)("th",{children:"Remarks"})]})}),Object(T.jsxs)("tbody",{children:[Object(T.jsxs)("tr",{children:[Object(T.jsx)("td",{children:"ID"}),Object(T.jsx)("td",{children:u._id}),Object(T.jsx)("td",{})]}),Object(T.jsxs)("tr",{children:[Object(T.jsx)("td",{children:"\u540d\u524d"}),Object(T.jsx)("td",{children:u.name}),Object(T.jsx)("td",{})]}),Object(T.jsxs)("tr",{children:[Object(T.jsx)("td",{children:"\u8077\u52d9"}),Object(T.jsx)("td",{children:u.duty}),Object(T.jsx)("td",{})]}),Object(T.jsxs)("tr",{children:[Object(T.jsx)("td",{children:"\u30bb\u30af\u30b7\u30e7\u30f3"}),Object(T.jsx)("td",{children:u.section}),Object(T.jsx)("td",{})]}),Object(T.jsxs)("tr",{children:[Object(T.jsx)("td",{children:"\u96c7\u7528\u5f62\u614b"}),Object(T.jsx)("td",{children:u.employment_status}),Object(T.jsx)("td",{})]}),Object(T.jsxs)("tr",{children:[Object(T.jsx)("td",{children:"\u7814\u4fee\u4e2d"}),Object(T.jsx)("td",{children:u.is_rookie?"\u7814\u4fee\u4e2d":"\u4fee\u4e86"}),Object(T.jsx)("td",{})]}),Object(T.jsxs)("tr",{children:[Object(T.jsx)("td",{children:"\u30aa\u30fc\u30d7\u30f3"}),Object(T.jsx)("td",{children:u.is_open_staff?"\u53ef":"\u4e0d\u53ef"}),Object(T.jsx)("td",{})]}),Object(T.jsxs)("tr",{children:[Object(T.jsx)("td",{children:"10\u6642\u7de0\u3081"}),Object(T.jsx)("td",{children:u.is_pre_close_staff?"\u53ef":"\u4e0d\u53ef"}),Object(T.jsx)("td",{})]}),Object(T.jsxs)("tr",{children:[Object(T.jsx)("td",{children:"\u7de0\u3081"}),Object(T.jsx)("td",{children:u.is_close_staff?"\u53ef":"\u4e0d\u53ef"}),Object(T.jsx)("td",{})]}),Object(T.jsxs)("tr",{children:[Object(T.jsx)("td",{children:" \u696d\u52d9\u958b\u59cb\u6642\u9593"}),Object(T.jsxs)("td",{children:[" ",u.start_default.substring(0,5)]}),Object(T.jsx)("td",{children:"\u63d0\u51fa\u6642\u306b\u81ea\u52d5\u5165\u529b\u3055\u308c\u308b\u5024\u3067\u3059"})]}),Object(T.jsxs)("tr",{children:[Object(T.jsx)("td",{children:" \u696d\u52d9\u7d42\u4e86\u6642\u9593"}),Object(T.jsxs)("td",{children:[" ",u.end_default.substring(0,5)]}),Object(T.jsx)("td",{children:"\u63d0\u51fa\u6642\u306b\u81ea\u52d5\u5165\u529b\u3055\u308c\u308b\u5024\u3067\u3059"})]}),Object(T.jsxs)("tr",{children:[Object(T.jsx)("td",{children:" \u9031\u9593\u5e0c\u671b\u30b7\u30d5\u30c8\u56de\u6570"}),Object(T.jsxs)("td",{children:[" \u9031",u.desired_times_per_week]}),Object(T.jsx)("td",{children:"\u30b7\u30d5\u30c8\u4f5c\u6210\u306e\u53c2\u8003\u306b\u3057\u307e\u3059"})]}),Object(T.jsxs)("tr",{children:[Object(T.jsx)("td",{children:" \u5e0c\u671b\u5c31\u52b4\u6642\u9593"}),Object(T.jsxs)("td",{children:[" ",u.desired_working_time,"h"]}),Object(T.jsx)("td",{children:"\u30b7\u30d5\u30c8\u4f5c\u6210\u306e\u53c2\u8003\u306b\u3057\u307e\u3059"})]}),Object(T.jsxs)("tr",{children:[Object(T.jsx)("td",{children:" \u901a\u52e4\u65b9\u6cd5"}),Object(T.jsxs)("td",{children:[" ",u.commute]}),Object(T.jsx)("td",{})]}),Object(T.jsxs)("tr",{children:[Object(T.jsx)("td",{children:" \u6700\u5bc4\u308a\u99c5"}),Object(T.jsxs)("td",{children:[" ",u.station]}),Object(T.jsx)("td",{children:" \u6700\u77ed\u7d4c\u8def\u304c\u4ea4\u901a\u8cbb\u652f\u7d66\u984d\u3067\u3059"})]})]})]})]})]})]})},Ne=n(144);var we=function(e){var t=e.history,n=Object(c.useState)(""),r=Object(b.a)(n,2),a=r[0],s=r[1],i=Object(c.useState)(""),l=Object(b.a)(i,2),o=l[0],j=l[1],d=Object(c.useState)(""),u=Object(b.a)(d,2),h=u[0],O=u[1],x=Object(c.useState)(""),p=Object(b.a)(x,2),m=p[0],f=p[1],v=Object(c.useState)(!1),g=Object(b.a)(v,2),y=g[0],S=g[1],_=Object(c.useState)(!1),C=Object(b.a)(_,2),I=C[0],N=C[1],w=Object(c.useState)(!1),k=Object(b.a)(w,2),L=k[0],E=k[1],D=Object(c.useState)(!1),F=Object(b.a)(D,2),M=F[0],G=F[1],H=Object(c.useState)(""),B=Object(b.a)(H,2),R=B[0],A=B[1],q=Object(c.useState)(""),P=Object(b.a)(q,2),z=P[0],J=P[1],Q=Object(c.useState)(""),V=Object(b.a)(Q,2),K=V[0],X=V[1],Z=Object(c.useState)(""),$=Object(b.a)(Z,2),ne=$[0],re=$[1],se=Object(c.useState)(""),le=Object(b.a)(se,2),oe=le[0],be=le[1],ue=Object(c.useState)(""),Oe=Object(b.a)(ue,2),xe=Oe[0],pe=Oe[1],me=Object(c.useState)(!0),ve=Object(b.a)(me,2),ge=ve[0],ye=ve[1],Se=U().userInfo,_e=W(),Ce=Y().profile;Object(c.useEffect)((function(){Se?(ae(_e,Se),Ce.name?s(Ce.name):s("\u540d\u524d\u304c\u3042\u308a\u307e\u305b\u3093"),Ce.duty?j(Ce.duty):j(""),Ce.employment_status?f(Ce.employment_status):f(""),Ce.section?O(Ce.section):O(""),Ce.is_rookie?S(Ce.is_rookie):S(!1),Ce.is_open_staff?N(Ce.is_open_staff):N(!1),Ce.is_pre_close_staff?E(Ce.is_pre_close_staff):E(!1),Ce.is_close_staff?G(Ce.is_close_staff):G(!1),Ce.start_default?A(Ce.start_default):A(""),Ce.end_default?J(Ce.end_default):J(""),Ce.desired_times_per_week?X(Ce.desired_times_per_week):X(0),Ce.desired_working_time?re(Ce.desired_working_time):re(0),Ce.commute?be(Ce.commute):be(""),Ce.station?pe(Ce.station):pe(""),ye(!1)):t.push("/login"),R||z||(A(Ce.start_default.substring(0,5)),J(Ce.end_default.substring(0,5)))}),[t,Se]);var Ie=function(){var e=Object(te.a)(ee.a.mark((function e(n){var c,r;return ee.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(n.preventDefault(),console.log("submitted!"),console.log(a,o,h,y,I,L,M,R,z,K,ne,oe,xe),!window.confirm("\u30d7\u30ed\u30d5\u30a3\u30fc\u30eb\u306e\u66f4\u65b0\u3092\u3057\u307e\u3059\u304b\uff1f")){e.next=10;break}return c={headers:{"Content-type":"application/json",Authorization:"Bearer ".concat(Se.token)}},e.next=7,ce.a.put("/api/users/update/profile/",{name:a,duty:o,employment:m,section:h,isRookie:y,isOpen:I,isPreClose:L,isClose:M,startDefault:R,endDefault:z,weeklyTime:K,workTime:ne,commute:oe,station:xe},c);case 7:r=e.sent,r.data,t.push("/profile");case 10:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}();return Object(T.jsxs)(T.Fragment,{children:[Object(T.jsx)(ie.Link,{to:"/profile",className:"btn my-2",style:{background:"#999999"},children:"\uff1c \u623b\u308b"}),ge?Object(T.jsx)(fe,{}):Object(T.jsx)(he,{children:Object(T.jsxs)(je.a,{onSubmit:Ie,className:"border p-3",children:[Object(T.jsxs)(je.a.Group,{controlId:"name",children:[Object(T.jsx)(je.a.Label,{className:"mt-3 mb-0",children:"\u540d\u524d"}),Object(T.jsx)(je.a.Control,{required:!0,type:"name",placeholder:"\u540d\u524d\u3092\u8a18\u5165",value:a,onChange:function(e){return s(e.target.value)}})]}),Object(T.jsxs)(je.a.Group,{controlId:"duty",children:[Object(T.jsx)(je.a.Label,{className:"mt-3 mb-0",children:"\u8077\u52d9"}),Object(T.jsxs)(je.a.Control,{required:!0,as:"select",value:o,onChange:function(e){return j(e.target.value)},style:{cursor:"pointer"},children:[Object(T.jsx)("option",{value:"\u6b63\u793e\u54e1",children:"\u6b63\u793e\u54e1"}),Object(T.jsx)("option",{value:"\u30a2\u30eb\u30d0\u30a4\u30c8\u30ea\u30fc\u30c0\u30fc",children:"\u30a2\u30eb\u30d0\u30a4\u30c8\u30ea\u30fc\u30c0\u30fc"}),Object(T.jsx)("option",{value:"\u30a2\u30eb\u30d0\u30a4\u30c8",children:"\u30a2\u30eb\u30d0\u30a4\u30c8"}),Object(T.jsx)("option",{value:"",children:"\u300c\u8077\u52d9\u300d\u3092\u9078\u629e\u3057\u3066\u304f\u3060\u3055\u3044"})]})]}),Object(T.jsxs)(je.a.Group,{controlId:"employment",children:[Object(T.jsx)(je.a.Label,{className:"mt-3 mb-0",children:"\u96c7\u7528\u5f62\u614b"}),Object(T.jsxs)(je.a.Control,{required:!0,as:"select",value:m,onChange:function(e){return f(e.target.value)},style:{cursor:"pointer"},children:[Object(T.jsx)("option",{value:"\u6b63\u793e\u54e1",children:"\u6b63\u793e\u54e1"}),Object(T.jsx)("option",{value:"\u30d5\u30ea\u30fc\u30bf\u30fc\uff08\u903140\u6642\u9593\uff09",children:"\u30d5\u30ea\u30fc\u30bf\u30fc\uff08\u903140\u6642\u9593\uff09"}),Object(T.jsx)("option",{value:"\u30d5\u30ea\u30fc\u30bf\u30fc\uff08\u903120\u6642\u9593\uff09",children:"\u30d5\u30ea\u30fc\u30bf\u30fc\uff08\u903120\u6642\u9593\uff09"}),Object(T.jsx)("option",{value:"\u5b66\u751f",children:"\u5b66\u751f"}),Object(T.jsx)("option",{value:"",children:"\u300c\u96c7\u7528\u5f62\u614b\u300d\u3092\u9078\u629e\u3057\u3066\u304f\u3060\u3055\u3044"})]})]}),Object(T.jsxs)(je.a.Group,{controlId:"section",children:[Object(T.jsx)(je.a.Label,{className:"mt-3 mb-0",children:"\u30bb\u30af\u30b7\u30e7\u30f3"}),Object(T.jsxs)(je.a.Control,{required:!0,as:"select",value:h,onChange:function(e){return O(e.target.value)},style:{cursor:"pointer"},children:[Object(T.jsx)("option",{value:"\u30d5\u30ed\u30f3\u30c8",children:"\u30d5\u30ed\u30f3\u30c8"}),Object(T.jsx)("option",{value:"\u6620\u5199",children:"\u6620\u5199"}),Object(T.jsx)("option",{value:"\u30b3\u30f3\u30bb\u30c3\u30b7\u30e7\u30f3",children:"\u30b3\u30f3\u30bb\u30c3\u30b7\u30e7\u30f3"}),Object(T.jsx)("option",{value:"\u30dc\u30c3\u30af\u30b9",children:"\u30dc\u30c3\u30af\u30b9"}),Object(T.jsx)("option",{value:"\u30b7\u30e7\u30c3\u30d7",children:"\u30b7\u30e7\u30c3\u30d7"}),Object(T.jsx)("option",{value:"",children:"\u300c\u30bb\u30af\u30b7\u30e7\u30f3\u300d\u3092\u9078\u629e\u3057\u3066\u304f\u3060\u3055\u3044"})]})]}),Object(T.jsxs)(je.a.Group,{controlId:"isRookie",children:[Object(T.jsx)(je.a.Label,{className:"mt-3 mb-0",children:"\u7814\u4fee"}),Object(T.jsxs)(je.a.Control,{required:!0,as:"select",value:y,onChange:function(){return S(!y)},style:{cursor:"pointer"},children:[Object(T.jsx)("option",{value:!0,children:"\u7814\u4fee\u4e2d"}),Object(T.jsx)("option",{value:!1,children:"\u5b8c\u4e86"})]})]}),Object(T.jsxs)(je.a.Group,{controlId:"isOpen",children:[Object(T.jsx)(je.a.Label,{className:"mt-3 mb-0",children:"\u30aa\u30fc\u30d7\u30f3"}),Object(T.jsxs)(je.a.Control,{required:!0,as:"select",value:I,onChange:function(){return N(!I)},style:{cursor:"pointer"},children:[Object(T.jsx)("option",{value:!0,children:"\u53ef"}),Object(T.jsx)("option",{value:!1,children:"\u4e0d\u53ef"})]})]}),Object(T.jsxs)(je.a.Group,{controlId:"isPreClose",children:[Object(T.jsx)(je.a.Label,{className:"mt-3 mb-0",children:"10\u6642\u7de0\u3081"}),Object(T.jsxs)(je.a.Control,{required:!0,as:"select",value:L,onChange:function(){return E(!L)},style:{cursor:"pointer"},children:[Object(T.jsx)("option",{value:!0,children:"\u53ef"}),Object(T.jsx)("option",{value:!1,children:"\u4e0d\u53ef"})]})]}),Object(T.jsxs)(je.a.Group,{controlId:"isClose",children:[Object(T.jsx)(je.a.Label,{className:"mt-3 mb-0",children:"\u7de0\u3081"}),Object(T.jsxs)(je.a.Control,{required:!0,as:"select",value:M,onChange:function(){return G(!M)},style:{cursor:"pointer"},children:[Object(T.jsx)("option",{value:!0,children:"\u53ef"}),Object(T.jsx)("option",{value:!1,children:"\u4e0d\u53ef"})]})]}),Object(T.jsx)(je.a.Label,{className:"mt-3 mb-0",children:"\u901a\u5e38\u696d\u52d9\u958b\u59cb\u6642\u9593"}),Object(T.jsx)(Ne.a,{placeholder:"\u958b\u59cb\u6642\u9593\u3092\u9078\u629e",value:R,min:new Date("01/01/2021 07:00 AM"),format:"HH:mm",step:30,change:function(e){return A(e.text)},openOnFocus:!0,strictMode:!0,showClearButton:!1,allowEdit:!1,style:{cursor:"pointer"}}),Object(T.jsx)(je.a.Label,{className:"mt-3 mb-0",children:"\u901a\u5e38\u696d\u52d9\u7d42\u4e86\u6642\u9593"}),Object(T.jsx)(Ne.a,{placeholder:"\u7d42\u4e86\u6642\u9593\u3092\u9078\u629e",value:z,min:new Date("01/01/2021 "+R),format:"HH:mm",step:30,change:function(e){return J(e.text)},openOnFocus:!0,strictMode:!0,showClearButton:!1,allowEdit:!1,style:{cursor:"pointer"}}),Object(T.jsxs)(je.a.Group,{controlId:"weeklyWork",children:[Object(T.jsx)(je.a.Label,{className:"mt-3 mb-0",children:"\u9031\u9593\u5e0c\u671b\u30b7\u30d5\u30c8\u56de\u6570"}),Object(T.jsxs)(je.a.Control,{required:!0,as:"select",value:K,onChange:function(e){return X(e.target.value)},style:{cursor:"pointer"},children:[Object(T.jsx)("option",{value:1,children:"1\u56de"}),Object(T.jsx)("option",{value:2,children:"2\u56de"}),Object(T.jsx)("option",{value:3,children:"3\u56de"}),Object(T.jsx)("option",{value:4,children:"4\u56de"}),Object(T.jsx)("option",{value:5,children:"5\u56de"}),Object(T.jsx)("option",{value:0,children:"\u300c\u9031\u9593\u5e0c\u671b\u30b7\u30d5\u30c8\u56de\u6570\u300d\u3092\u9078\u629e\u3057\u3066\u304f\u3060\u3055\u3044"})]})]}),Object(T.jsxs)(je.a.Group,{controlId:"workTime",children:[Object(T.jsx)(je.a.Label,{className:"mt-3 mb-0",children:"\u5e0c\u671b\u5c31\u52b4\u6642\u9593"}),Object(T.jsxs)(je.a.Control,{required:!0,as:"select",value:ne,onChange:function(e){return re(e.target.value)},style:{cursor:"pointer"},children:[Object(T.jsx)("option",{value:3,children:"3h"}),Object(T.jsx)("option",{value:4,children:"4h"}),Object(T.jsx)("option",{value:5,children:"5h"}),Object(T.jsx)("option",{value:6,children:"6h"}),Object(T.jsx)("option",{value:7,children:"7h"}),Object(T.jsx)("option",{value:8,children:"8h"}),Object(T.jsx)("option",{value:0,children:"\u300c\u5e0c\u671b\u5c31\u52b4\u6642\u9593\u300d\u3092\u9078\u629e\u3057\u3066\u304f\u3060\u3055\u3044"})]})]}),Object(T.jsxs)(je.a.Group,{controlId:"commute",children:[Object(T.jsx)(je.a.Label,{className:"mt-3 mb-0",children:"\u901a\u52e4\u65b9\u6cd5"}),Object(T.jsxs)(je.a.Control,{required:!0,as:"select",value:oe,onChange:function(e){return be(e.target.value)},style:{cursor:"pointer"},children:[Object(T.jsx)("option",{value:"\u96fb\u8eca",children:"\u96fb\u8eca"}),Object(T.jsx)("option",{value:"\u30d0\u30b9",children:"\u30d0\u30b9"}),Object(T.jsx)("option",{value:"\u5f92\u6b69",children:"\u5f92\u6b69"}),Object(T.jsx)("option",{value:"\u81ea\u8ee2\u8eca",children:"\u81ea\u8ee2\u8eca"}),Object(T.jsx)("option",{value:"",children:"\u300c\u300d\u3092\u9078\u629e\u3057\u3066\u304f\u3060\u3055\u3044"})]})]}),Object(T.jsxs)(je.a.Group,{controlId:"station",children:[Object(T.jsx)(je.a.Label,{className:"mt-3 mb-0",children:"\u6700\u5bc4\u308a\u99c5"}),Object(T.jsx)(je.a.Control,{type:"text",placeholder:"\u6700\u5bc4\u308a\u99c5\u3092\u5165\u529b",value:xe,onChange:function(e){return pe(e.target.value)}})]}),Object(T.jsx)(de.a,{type:"submit",variant:"primary",size:"lg",className:"mt-4",children:"\u66f4\u65b0"})]})})]})},ke=n(149),Le=n(47),Ee=Le.startOfMonth,De=Le.startOfWeek,Fe=Le.endOfMonth,Me=Le.endOfWeek,Ge=Le.startOfDay,Te=Le.addDays,He=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:new Date,t=De(Ge(e,1));return function(){var e=Object(S.a)(Array(7)).map((function(e,n){return Te(t,n)}));return t=Te(e[6],1),e}},Be=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:new Date,t=[],n=e,c=function(e){return e[e.length-1][6]};return function(){var e=He(Ee(n)),r=Ge(Me(Fe(n)));for(t.push(e());c(t)<r;)t.push(e());var a=t;return t=[],n=Te(c(a),1),a}};var Re=function(e){var t=e.history,n=e.match,a=n.params.id,s=Object(c.useState)([]),i=Object(b.a)(s,2),l=i[0],o=i[1],j=U().userInfo,d=["\u65e5","\u6708","\u706b","\u6c34","\u6728","\u91d1","\u571f"],u=Be(new Date(String(l.period_start)))();return Object(c.useEffect)((function(){if(j){var e=function(){var e=Object(te.a)(ee.a.mark((function e(){var t,c;return ee.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,ce.a.get("/api/shifts/confirm/".concat(a,"/"),n);case 2:t=e.sent,c=t.data,o(c);case 5:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),n={headers:{"Content-type":"application/json",Authorization:"Bearer ".concat(j.token)}};e()}else t.push("/login")}),[j,t,n]),Object(T.jsxs)("div",{children:[Object(T.jsx)(ie.Link,{to:"/profile",className:"btn my-2",style:{background:"#999999"},children:"\uff1c \u623b\u308b"}),Object(T.jsx)("h1",{className:"p-4",children:"\u30b7\u30d5\u30c8\u78ba\u8a8d"}),l.shiftItems&&Object(T.jsxs)("div",{className:"text-center",children:[Object(T.jsxs)("h4",{style:{borderBottom:"1px solid",display:"inline-block"},children:[u[0][6].getFullYear(),"/",u[0][6].getMonth()+1]}),Object(T.jsx)("div",{children:Object(T.jsx)(be.a,{className:"text-center my-4",children:u.map((function(e){return Object(T.jsx)(r.a.Fragment,{children:e.map((function(e){return Object(T.jsx)(ue.a,{className:"my-1",xs:6,sm:6,md:4,lg:3,xl:2,children:Object(T.jsxs)(ke.a,{style:{width:"11rem",height:"10rem"},children:[Object(T.jsxs)(ke.a.Header,{children:[e.getMonth()+1," / ",e.getDate()," (",d[e.getDay()],")"]}),Object(T.jsx)(ke.a.Body,{children:l.shiftItems.map((function(t){return Object(T.jsx)("div",{children:t.date===Object(Ce.a)(e,"yyyy-MM-dd")&&Object(T.jsxs)("div",{children:[Object(T.jsx)(ke.a.Title,{style:{color:"#0405B5"},children:Object(T.jsx)("b",{children:"\u51fa\u52e4"})}),Object(T.jsxs)(ke.a.Text,{children:[t.start_time.substring(0,5)," ","~"," ",t.end_time.substring(0,5)]})]})},t._id)}))})]})},e)}))},e)}))})})]})]})};var Ae=function(e){var t,n=e.shiftItem,r=e.date,a=Object(c.useState)(!1),s=Object(b.a)(a,2),i=s[0],o=s[1],j=Object(c.useState)(!1),d=Object(b.a)(j,2),u=d[0],h=d[1],O=Object(c.useState)(""),x=Object(b.a)(O,2),p=x[0],m=x[1],f=Object(c.useState)(""),v=Object(b.a)(f,2),g=v[0],y=v[1],S=Object(c.useState)(!0),_=Object(b.a)(S,2),C=_[0],I=_[1],N=Z(),w=Y().profile;return Object(c.useEffect)((function(){n&&C?(o(n.is_work),h(n.is_all_day),m(String(n.start_time).substring(0,5)),y(String(n.end_time).substring(0,5)),I(!1)):u?(m("07:00"),y("23:30")):p||g||(m(w.start_default.substring(0,5)),y(w.end_default.substring(0,5))),r&&!i&&Se(N,r),i&&r&&p&&g&&ye(N,r,i,p,g,u)}),[u,i,r,p,g]),Object(T.jsx)(T.Fragment,{children:Object(T.jsx)(l.a,{style:{color:(t=i,t?"dodgerblue":"")},children:Object(T.jsx)(je.a.Group,{children:p||g?Object(T.jsxs)("div",{children:[Object(T.jsx)(je.a.Label,{className:"m-0",children:"\u51fa\u6b20"}),Object(T.jsxs)(je.a.Control,{as:"select",value:i,onChange:function(e){o(!i)},className:"mb-3",style:{cursor:"pointer"},children:[Object(T.jsx)("option",{value:!1,children:"\u2613"}),Object(T.jsx)("option",{value:!0,children:"\u25cb"})]}),Object(T.jsx)(je.a.Label,{className:"mb-0",children:"\u958b\u59cb\u6642\u9593"}),Object(T.jsx)(Ne.a,{placeholder:"\u958b\u59cb\u6642\u9593\u3092\u9078\u629e",value:p,min:new Date("01/01/2021 07:00 AM"),format:"HH:mm",step:30,change:function(e){return m(e.text)},enabled:!u&&i,openOnFocus:!u,strictMode:!0,showClearButton:!1,allowEdit:!1,style:{cursor:"pointer"}}),Object(T.jsx)(je.a.Label,{className:"mt-3 mb-0",children:"\u7d42\u4e86\u6642\u9593"}),Object(T.jsx)(Ne.a,{placeholder:"\u7d42\u4e86\u6642\u9593\u3092\u9078\u629e",value:g,min:new Date("01/01/2021 "+p),format:"HH:mm",step:30,change:function(e){return y(e.text)},enabled:!u&&i,openOnFocus:!u,strictMode:!0,showClearButton:!1,allowEdit:!1,style:{cursor:"pointer"}}),Object(T.jsx)(je.a.Group,{className:"my-3",controlId:"formBasicCheckbox",children:Object(T.jsx)(je.a.Check,{disabled:!i,type:"checkbox",label:"\u7d42\u65e5",checked:u,onChange:function(){return h(!u)},className:"text-left"})})]}):Object(T.jsx)(fe,{})})})})};var Ue=function(e){var t=e.history,n=e.match,a=U().userInfo,s=X().shiftItems,i=n.params.id,l=Object(c.useState)([]),o=Object(b.a)(l,2),j=o[0],d=o[1],u=Object(c.useState)([]),h=Object(b.a)(u,2),O=h[0],x=h[1],p=Object(c.useState)([]),m=Object(b.a)(p,2),f=m[0],v=m[1],g=Object(c.useState)(!0),y=Object(b.a)(g,2),S=y[0],_=y[1],C=["\u65e5","\u6708","\u706b","\u6c34","\u6728","\u91d1","\u571f"],I=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:new Date;return e.getFullYear()+"-"+("0"+(e.getMonth()+1)).slice(-2)+"-"+("0"+e.getDate()).slice(-2)};Object(c.useEffect)((function(){if(a){var e=function(){var e=Object(te.a)(ee.a.mark((function e(){var t,c;return ee.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,ce.a.get("/api/shifts/confirm/".concat(i,"/"),n);case 2:t=e.sent,c=t.data,d(c),x(c.remarks),v(Be(new Date(String(c.period_start)))()),_(!1),console.log(c);case 9:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),n={headers:{"Content-type":"application/json",Authorization:"Bearer ".concat(a.token)}};e()}else t.push("/login")}),[a,t,n]);var N=function(){var e=Object(te.a)(ee.a.mark((function e(n){var c,r;return ee.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(n.preventDefault(),!window.confirm("\u3053\u306e\u30b7\u30d5\u30c8\u3092\u66f4\u65b0\u3057\u307e\u3059\u304b?")){e.next=8;break}return c={headers:{"Content-type":"application/json",Authorization:"Bearer ".concat(a.token)}},e.next=5,ce.a.put("/api/shifts/shift-update/".concat(i,"/"),{shiftItems:s,remarks:O},c);case 5:r=e.sent,r.data,t.push("/profile");case 8:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}();return Object(T.jsxs)("div",{children:[Object(T.jsx)(ie.Link,{to:"/profile",className:"btn my-2",style:{background:"#999999"},children:"\uff1c \u623b\u308b"}),Object(T.jsx)("h1",{className:"p-4",children:"\u30b7\u30d5\u30c8\u66f4\u65b0"}),S?Object(T.jsx)(fe,{}):Object(T.jsxs)("div",{className:"text-center",children:[Object(T.jsxs)("h4",{style:{borderBottom:"1px solid",display:"inline-block"},children:[f[0][6].getFullYear(),"/",f[0][6].getMonth()+1]}),Object(T.jsxs)(je.a,{onSubmit:N,children:[Object(T.jsx)(be.a,{className:"my-5 border",children:f.map((function(e,t){return Object(T.jsx)(r.a.Fragment,{children:e.map((function(e,t){return Object(T.jsx)(r.a.Fragment,{children:e.getMonth()===f[0][6].getMonth()&&Object(T.jsx)(ue.a,{className:"my-1",xs:6,sm:6,md:4,lg:3,xl:2,children:Object(T.jsxs)(ke.a,{className:"mx-auto my-2",children:[Object(T.jsxs)(ke.a.Header,{children:[e.getMonth()+1," / ",e.getDate()," (",C[e.getDay()],")"]}),Object(T.jsx)(ke.a.Body,{children:Object(T.jsx)(Ae,{date:I(e),shiftItem:j.shiftItems.find((function(t){return t.date===I(e)}))})})]})})},t)}))},t)}))}),Object(T.jsxs)(be.a,{className:"p-3 mb-5",children:[Object(T.jsx)(ue.a,{md:8,children:Object(T.jsxs)(je.a.Group,{controlId:"remarks",children:[Object(T.jsx)(je.a.Label,{children:"\u5099\u8003"}),Object(T.jsx)(je.a.Control,{as:"textarea",row:"5",placeholder:"\u4eca\u56de\u306e\u30b7\u30d5\u30c8\u306b\u95a2\u3057\u3066\u306a\u306b\u304b\u5e0c\u671b\u304c\u3042\u308c\u3070\u8a18\u8ff0\u3057\u3066\u304f\u3060\u3055\u3044",value:O,onChange:function(e){return x(e.target.value)}})]})}),Object(T.jsx)(ue.a,{md:4,className:"d-grid gap-2 mt-4",children:Object(T.jsx)(de.a,{type:"submit",variant:"primary",size:"lg",children:"\u63d0\u51fa"})})]})]})]})]})};var qe=function(e){var t,n=e.history,r=e.date,a=Object(c.useState)(!1),s=Object(b.a)(a,2),i=s[0],o=s[1],j=Object(c.useState)(!1),d=Object(b.a)(j,2),u=d[0],h=d[1],O=Object(c.useState)(""),x=Object(b.a)(O,2),p=x[0],m=x[1],f=Object(c.useState)(""),v=Object(b.a)(f,2),g=v[0],y=v[1],S=Y().profile,_=(X(),Z()),C=function(e){return e?"pointer":"not-allowed"};return Object(c.useEffect)((function(){u?(m("07:00"),y("23:30")):p||g||(m(S.start_default.substring(0,5)),y(S.end_default.substring(0,5))),r&&!i&&Se(_,r),i&&r&&p&&g&&ye(_,r,i,p,g,u)}),[n,u,i,r,p,g]),Object(T.jsx)(T.Fragment,{children:Object(T.jsx)(l.a,{style:{color:(t=i,t?"dodgerblue":"")},children:Object(T.jsxs)(je.a.Group,{children:[Object(T.jsx)(je.a.Label,{className:"m-0",children:"\u51fa\u6b20"}),Object(T.jsxs)(je.a.Control,{as:"select",value:i,onChange:function(e){o(!i)},className:"mb-3",style:{cursor:"pointer"},children:[Object(T.jsx)("option",{value:!1,children:"\u2613"}),Object(T.jsx)("option",{value:!0,children:"\u25cb"})]}),p||g?Object(T.jsxs)("div",{children:[Object(T.jsx)(je.a.Label,{className:"mb-0",children:"\u958b\u59cb\u6642\u9593"}),Object(T.jsx)(Ne.a,{placeholder:"\u958b\u59cb\u6642\u9593\u3092\u9078\u629e",value:p,min:new Date("01/01/2021 07:00 AM"),format:"HH:mm",step:30,change:function(e){return m(e.text)},enabled:!u&&i,openOnFocus:!u,strictMode:!0,showClearButton:!1,allowEdit:!1,style:{cursor:C(i)}}),Object(T.jsx)(je.a.Label,{className:"mt-3 mb-0",children:"\u7d42\u4e86\u6642\u9593"}),Object(T.jsx)(Ne.a,{placeholder:"\u7d42\u4e86\u6642\u9593\u3092\u9078\u629e",value:g,min:new Date("01/01/2021 "+p),format:"HH:mm",step:30,change:function(e){return y(e.text)},enabled:!u&&i,openOnFocus:!u,strictMode:!0,showClearButton:!1,allowEdit:!1,style:{cursor:C(i)}}),Object(T.jsx)(je.a.Group,{className:"my-3",controlId:"formBasicCheckbox",children:Object(T.jsx)(je.a.Check,{disabled:!i,type:"checkbox",label:"\u7d42\u65e5",onChange:function(){return h(!u)},className:"text-left"})})]}):Object(T.jsx)(fe,{})]})})})};var Pe=function(e){var t=e.history,n=U().userInfo,a=Y().profile,s=X(),i=s.shiftItems,l=s.period,o=s.isSubmitted,j=Object(c.useState)(""),d=Object(b.a)(j,2),u=d[0],h=d[1],O=["\u65e5","\u6708","\u706b","\u6c34","\u6728","\u91d1","\u571f"],x=Be(l[0])(),p=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:new Date;return e.getFullYear()+"-"+("0"+(e.getMonth()+1)).slice(-2)+"-"+("0"+e.getDate()).slice(-2)};Object(c.useEffect)((function(){n?o&&t.push("/profile"):t.push("/login")}),[n,t]);var m=function(){var e=Object(te.a)(ee.a.mark((function e(c){var r,s;return ee.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(c.preventDefault(),!window.confirm("\u30b7\u30d5\u30c8\u3092\u63d0\u51fa\u3057\u307e\u3059\u304b?\uff08\u63d0\u51fa\u671f\u9650\u5f8c\u3001MGR\u304c\u53d7\u7406\u3059\u308b\u307e\u3067\u306f\u66f4\u65b0\u53ef\u80fd\u3067\u3059\uff09")){e.next=8;break}return r={headers:{"Content-type":"application/json",Authorization:"Bearer ".concat(n.token)}},e.next=5,ce.a.post("/api/shifts/shift/create/",{shiftItems:i,section:a.section,periodStart:p(l[0]),periodEnd:p(l[1]),remarks:u,isSubmitted:!0},r);case 5:s=e.sent,s.data,t.push("/profile");case 8:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}();return Object(T.jsxs)("div",{children:[Object(T.jsx)(ie.Link,{to:"/profile",className:"btn my-2",style:{background:"#999999"},children:"\uff1c \u623b\u308b"}),Object(T.jsx)("h1",{className:"p-4",children:"\u65b0\u898f\u30b7\u30d5\u30c8\u63d0\u51fa"}),Object(T.jsxs)("div",{className:"text-center",children:[Object(T.jsxs)("h4",{style:{borderBottom:"1px solid",display:"inline-block"},children:[x[0][6].getFullYear(),"/",x[0][6].getMonth()+1]}),Object(T.jsxs)(je.a,{onSubmit:m,children:[Object(T.jsx)(be.a,{className:"my-5 border",children:x.map((function(e,t){return Object(T.jsx)(r.a.Fragment,{children:e.map((function(e,t){return Object(T.jsx)(r.a.Fragment,{children:e.getMonth()===x[0][6].getMonth()&&Object(T.jsx)(ue.a,{className:"my-1",xs:6,sm:6,md:4,lg:3,xl:2,children:Object(T.jsxs)(ke.a,{className:"mx-auto my-2",children:[Object(T.jsxs)(ke.a.Header,{children:[e.getMonth()+1," / ",e.getDate()," (",O[e.getDay()],")"]}),Object(T.jsx)(ke.a.Body,{children:Object(T.jsx)(qe,{date:p(e)})})]})})},t)}))},t)}))}),Object(T.jsxs)(be.a,{className:"p-3 mb-5",children:[Object(T.jsx)(ue.a,{md:8,children:Object(T.jsxs)(je.a.Group,{controlId:"remarks",children:[Object(T.jsx)(je.a.Label,{children:"\u5099\u8003"}),Object(T.jsx)(je.a.Control,{as:"textarea",row:"5",placeholder:"\u4eca\u56de\u306e\u30b7\u30d5\u30c8\u306b\u95a2\u3057\u3066\u306a\u306b\u304b\u5e0c\u671b\u304c\u3042\u308c\u3070\u8a18\u8ff0\u3057\u3066\u304f\u3060\u3055\u3044",value:u,onChange:function(e){return h(e.target.value)}})]})}),Object(T.jsx)(ue.a,{md:4,className:"d-grid gap-2 mt-4",children:Object(T.jsx)(de.a,{type:"submit",variant:"primary",size:"lg",children:"\u63d0\u51fa"})})]})]})]})]})};var ze=function(){return Object(T.jsx)(ie.HashRouter,{children:Object(T.jsx)(A,{children:Object(T.jsx)(K,{children:Object(T.jsxs)(J,{children:[Object(T.jsx)(se,{}),Object(T.jsx)("main",{className:"py-3",children:Object(T.jsxs)(l.a,{children:[Object(T.jsx)(le.d,{path:"/",component:oe,exact:!0}),Object(T.jsx)(le.d,{path:"/register",component:pe}),Object(T.jsx)(le.d,{path:"/login",component:ve}),Object(T.jsx)(le.d,{path:"/shifts/confirm/:id",component:Re}),Object(T.jsx)(le.d,{path:"/profile",component:Ie}),Object(T.jsx)(le.d,{path:"/update/profile",component:we}),Object(T.jsx)(le.d,{path:"/shifts/test",component:qe}),Object(T.jsx)(le.d,{path:"/update/test/:id",component:Ae}),Object(T.jsx)(le.d,{path:"/shifts/update/:id",component:Ue}),Object(T.jsx)(le.d,{path:"/shifts/submit",component:Pe})]})})]})})})})},Je=function(e){e&&e instanceof Function&&n.e(3).then(n.bind(null,150)).then((function(t){var n=t.getCLS,c=t.getFID,r=t.getFCP,a=t.getLCP,s=t.getTTFB;n(e),c(e),r(e),a(e),s(e)}))};s.a.render(Object(T.jsx)(r.a.StrictMode,{children:Object(T.jsx)(ze,{})}),document.getElementById("root")),Je()},99:function(e,t,n){}},[[129,1,2]]]);
//# sourceMappingURL=main.df148eff.chunk.js.map